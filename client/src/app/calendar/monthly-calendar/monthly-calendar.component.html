<h1 class="text-center fw-light mt-5 mb-3 d-flex justify-content-between align-items-center" id="month-title">
  <!-- arrow buttons to change the month -->
  <i (click)="changeMonth(false)" class="fas fa-chevron-left"></i>
  {{monthString}}
  <i (click)="changeMonth(true)" class="fas fa-chevron-right"></i>
</h1>
<!-- calendar table starts -->
<table class="table table-bordered mx-auto" id="calendar-table">
  <!-- table header -->
  <thead>
    <tr>
      <!-- Day strings for different size of screen -->
      <th class="p-2 text-center">
        <span class="date-long d-none d-md-block">Sun</span>
        <span class="date-short fw-normal small d-block d-md-none">S</span>
      </th>
      <th class="p-2 text-center">
        <span class="date-long d-none d-md-block">Mon</span>
        <span class="date-short fw-normal small d-block d-md-none">M</span>
      </th>
      <th class="p-2 text-center">
        <span class="date-long d-none d-md-block">Tue</span>
        <span class="date-short fw-normal small d-block d-md-none">T</span>
      </th>
      <th class="p-2 text-center">
        <span class="date-long d-none d-md-block">Wed</span>
        <span class="date-short fw-normal small d-block d-md-none">W</span>
      </th>
      <th class="p-2 text-center">
        <span class="date-long d-none d-md-block">Thu</span>
        <span class="date-short fw-normal small d-block d-md-none">T</span>
      </th>
      <th class="p-2 text-center">
        <span class="date-long d-none d-md-block">Fri</span>
        <span class="date-short fw-normal small d-block d-md-none">F</span>
      </th>
      <th class="p-2 text-center">
        <span class="date-long d-none d-md-block">Sat</span>
        <span class="date-short fw-normal small d-block d-md-none">S</span>
      </th>
    </tr>
  </thead>
  <!-- table body -->
  <tbody>
    <!-- repeat the week row 6 times -->
    <tr *ngFor="let week of [].constructor(6); let weekIndex = index;"
      [ngClass]="weekIndex >= numOfWeeks? 'd-none': ''">
      <!-- repeat the day cell 7 times and caluclate the day -->
      <td *ngFor="let day of [].constructor(7); let dayIndex = index;" class="p-2 position-relative"
        [ngClass]="(dayIndex + 1) + (weekIndex * 7) > dateOffset && (dayIndex - dateOffset + 1) + (weekIndex * 7) < numOfDays + 1 ? 'hover' : ''"
        id="cell-{{(dayIndex - dateOffset + 1) + (weekIndex * 7)}}"
        (click)="openDetail((dayIndex - dateOffset + 1) + (weekIndex * 7), (dayIndex + 1) + (weekIndex * 7) > dateOffset)">
        <!-- declare a date variable -->
        <ng-container *ngVar="(dayIndex - dateOffset + 1) + (weekIndex * 7) as varDate">
          <!-- container for the object with no plan -->
          <ng-container
            *ngIf="weekIndex == 0 && dayIndex < dateOffset || varDate > planDates.length; else elseTemplate">
            <span></span>
          </ng-container>
          <ng-template #elseTemplate>
            <div class="d-flex align-items-center">
              <!-- date -->
              <p class="mb-0" [ngClass]="planDates[varDate - 1].plans.length > 0 ? 'fw-bold date-plan': ''">
                {{varDate}}
              </p>
            </div>
            <!-- list for the plans -->
            <ul class="mt-1 mb-0 px-2 plan-list d-md-block d-none">
              <ng-container *ngFor="let p of planDates[varDate - 1].plans; let i = index">
                <!-- Display up to 3 plans -->
                <li *ngIf="planDates[varDate - 1].plans.length > 0"
                  [ngClass]="p.progress == 100 ? 'text-decoration-line-through' : ''"
                  class="plan-item text-truncate small">
                  {{p.title}}
                </li>
              </ng-container>
            </ul>
          </ng-template>
        </ng-container>
      </td>
    </tr>
  </tbody>
</table>
